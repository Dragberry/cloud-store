<ui:composition template="/WEB-INF/templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">
<ui:define name="main">
	<h:form id="cloud-store-form">
		#{productController.init()}
		<h:panelGrid columns="2">
			<h:outputLabel>Search request:</h:outputLabel>
			<p:inputText value="#{productListModelBean.productListQuery.searchRequest}" />
			<h:outputLabel>Title:</h:outputLabel>
			<p:inputText value="#{productListModelBean.productListQuery.title}" />
			<h:outputLabel>Description:</h:outputLabel>
			<p:inputText value="#{productListModelBean.productListQuery.description}" />
			<h:outputLabel>Full description:</h:outputLabel>
			<p:inputText value="#{productListModelBean.productListQuery.fullDescription}" />
			<h:outputLabel>Min cost:</h:outputLabel>
			<pe:inputNumber value="#{productListModelBean.productListQuery.minCost}" 
				minValue="0" />
			<h:outputLabel>Max cost:</h:outputLabel>
			<pe:inputNumber value="#{productListModelBean.productListQuery.maxCost}"
				minValue="0" />
			<h:outputLabel>Categories:</h:outputLabel>
			<p:selectManyMenu value="#{productListModelBean.productListQuery.categoryIdList}" converter="javax.faces.Long">
				<f:selectItems value="#{productListModelBean.categoryList}" 
					var="category"
					itemLabel="#{category.title}" 
					itemValue="#{category.id}" />
			</p:selectManyMenu>
			<p:commandButton id="search" 
				value="Search"
				action="#{productController.doSearch}"
				update="datatable"/>
			<p:commandButton id="reset" 
				value="Reset"
				action="#{productController.doReset}"
				update="datatable"/>
		</h:panelGrid>
		<p:dataTable id="datatable"
			value="#{productListModelBean.productList}" 
			var="product"
			style="border: 1px solid">
			<p:column>
				<f:facet name="header">
					<h:outputText value="ID" />
				</f:facet>
				<h:outputText value="#{product.id}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Title" />
				</f:facet>
				<h:outputText value="#{product.title}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Description" />
				</f:facet>
				<h:outputText value="#{product.description}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Full Description" />
				</f:facet>
				<h:outputText value="#{product.fullDescription}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Cost" />
				</f:facet>
				<h:outputText value="#{product.cost}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Image" />
				</f:facet>
				<h:graphicImage
					value="/images/#{product.mainImage.path}#{product.mainImage.fileName}" />
			</p:column>
		</p:dataTable>
	</h:form>
</ui:define>
</ui:composition>